<!doctype html>
<html lang="sv">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>time/sloth PRO</title>

<style>
:root{
  --scale:1.25;                 /* +25% text */
  --bg:#1b1b1b;
  --fg:#fff;
  --outline:rgba(255,255,255,.22);
  --card:rgba(0,0,0,.18);
  --btn:rgba(255,255,255,.18);
  --btn2:rgba(255,255,255,.28);
}

*{box-sizing:border-box}
html,body{
  height:100%;
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  font-size:calc(16px * var(--scale));
}
body{
  background:var(--bg);
  color:var(--fg);
  overflow:hidden;
  user-select:none;
}

.wrap{
  height:100%;
  padding:14px;
  display:flex;
  flex-direction:column;
  gap:12px;
}

.panel{
  background:var(--card);
  border:1px solid var(--outline);
  border-radius:16px;
  padding:12px;
}

.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}

.chip{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.08);
  font-weight:800;
}
.chip input{transform:scale(1.3)}

button{
  font:inherit;
  font-weight:900;
  padding:14px;
  border:none;
  border-radius:16px;
  min-height:56px;
  cursor:pointer;
}
.primary{background:var(--btn2)}
.danger{background:#b00020;color:#fff}

.stage{
  flex:1;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  gap:14px;
}

.mode{
  font-size:calc(44px * var(--scale));
  font-weight:900;
}
.time{
  font-size:calc(96px * var(--scale));
  font-weight:900;
  line-height:1;
}
.next{
  font-size:calc(28px * var(--scale));
  font-style:italic;
  font-weight:800;
  opacity:.95;
}

/* progress bar */
.track{
  position:fixed;
  left:20px;
  right:20px;
  bottom:90px;
  height:8px;
  border-radius:999px;
  background:rgba(255,255,255,.2);
  overflow:hidden;
}
.car{
  position:absolute;
  top:-10px;
  left:0%;
  width:24px;
  height:24px;
  border-radius:50%;
  background:#fff;
  transform:translateX(-50%);
  transition:left .08s linear;
}
</style>
</head>

<body>
<div class="wrap">

  <div class="panel">
    <div class="grid">
      <label class="chip"><input type="checkbox" checked id="mFWD"> FWD</label>
      <label class="chip"><input type="checkbox" checked id="mTouring"> Touring</label>
      <label class="chip"><input type="checkbox" checked id="m112"> 1/12</label>
      <label class="chip"><input type="checkbox" checked id="mMod"> Mod</label>
      <label class="chip"><input type="checkbox" checked id="mGT"> GT</label>
      <label class="chip"><input type="checkbox" checked id="mKidz"> Kidz</label>
    </div>
  </div>

  <div class="stage">
    <div class="mode" id="mode">FWD</div>
    <div class="time" id="time">10:00</div>
    <div class="next" id="next">NEXT UP: Touring · 10 min</div>
  </div>

  <div class="panel">
    <button class="primary" id="start">Start</button>
    <button class="danger" id="stop" disabled>Stop</button>
  </div>

</div>

<div class="track">
  <div class="car" id="car"></div>
</div>

<script>
/* ===== MODES ===== */
const MODES = [
 {key:"FWD",voice:"Front wheel drive class"},
 {key:"Touring",voice:"Touring stock class"},
 {key:"1/12",voice:"One twelve class"},
 {key:"Mod",voice:"Modify class"},
 {key:"GT",voice:"Grand touring class"},
 {key:"Kidz",voice:"Kids class"}
];

const checkMap={
 FWD:"mFWD", Touring:"mTouring", "1/12":"m112",
 Mod:"mMod", GT:"mGT", Kidz:"mKidz"
};

let rotation=[];
let idx=0;
let running=false;
let duration=10*60*1000;
let endAt=0;
let timer=null;

const modeEl=document.getElementById("mode");
const timeEl=document.getElementById("time");
const nextEl=document.getElementById("next");
const carEl=document.getElementById("car");
const startBtn=document.getElementById("start");
const stopBtn=document.getElementById("stop");

function buildRotation(){
 rotation=MODES.filter(m=>document.getElementById(checkMap[m.key]).checked);
}

function fmt(ms){
 const t=Math.max(0,Math.ceil(ms/1000));
 return String(Math.floor(t/60)).padStart(2,"0")+":"+String(t%60).padStart(2,"0");
}

function speak(txt){
 if(!("speechSynthesis"in window))return;
 speechSynthesis.cancel();
 const u=new SpeechSynthesisUtterance(txt);
 u.lang="en-US";
 speechSynthesis.speak(u);
}

function startSlot(){
 const cur=rotation[idx];
 const next=rotation[(idx+1)%rotation.length];
 modeEl.textContent=cur.key;
 nextEl.textContent="NEXT UP: "+next.key+" · 10 min";
 speak(cur.voice);
 endAt=Date.now()+duration;
 tick();
 timer=setInterval(tick,80);
}

function tick(){
 const now=Date.now();
 const rem=endAt-now;
 timeEl.textContent=fmt(rem);
 carEl.style.left=((1-rem/duration)*100)+"%";
 if(rem<=0) endSlot();
}

function endSlot(){
 clearInterval(timer);
 speak(rotation[idx].voice+" training end");
 idx=(idx+1)%rotation.length;
 startSlot();
}

startBtn.onclick=()=>{
 buildRotation();
 if(!rotation.length)return;
 running=true;
 idx=0;
 startBtn.disabled=true;
 stopBtn.disabled=false;
 startSlot();
};

stopBtn.onclick=()=>{
 running=false;
 clearInterval(timer);
 speechSynthesis.cancel();
 startBtn.disabled=false;
 stopBtn.disabled=true;
};
</script>
</body>
</html>
